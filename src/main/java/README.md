# 计划 
首先完成了fxml的设计：暗含了css的部分知识，用FX scene builder最快！ 
有一个控制类controller，这里实现对按键的响应。  
目前打算的类有物体类：
1.生物类和物体类（包括石头、河流等），  
2.阵法类，实现阵法的摆放。  
3.一个战场类，保证战场的有序。  
4.UI绘画类放在Controller类中其他的类可调用他的绘图函数实现绘图。  
5.工厂类：实现打印创造生物。
6.文档类：实现记录和复写.   

更新！！
完成了动画！   
尚未完成阵法的选择！路径的优化胜负的判断！     
待加强动画管理！可以追加进攻动画！！  
键盘的读入！！    
文件系统！！这周可以完成文件系统1   
周五完成坐标转换，输出到文件框，写入文件系统、胜负判断  
周六完成阵法的读取和文件的写入和读取， 动画的显示
# 目前想法 
线程类可以考虑创建一个，完成run接口，在接口实现有生物体的移动（一个问题
：如何修改在BattleField的地图更新？二维地图还是要的，不然很难判断其他的）

注意：repaint函数是一个信号，在一个for中是同一个线程进行，在不同的线程中
不会交错进行！

封装绘画类为MainCanvas，实现绘图的重新刷新，重新刷新是synchronized
控制的，而生物体每次移动就调用这个函数刷新一次。  
线程使得地图同步化可以使用synchronize来锁住读取和修改函数。在修改函数
的前面还是要判断条件的，不然可能会出现同时向一个空位加上去的情况。    
刷新的时候怎么处理？是根据线程还是根据全图？根据全图吧？反正还是要每一行
每一列判断一下？每个点的元素还是要确定的，毕竟还有一些石头之类的元素？
仔细想这样其实没有优势，还是一个线程对应比较好。线程作为独立的类，
记录当前的位置和下一次的位置，并且记录是否需要死亡动画。重复绘图是一个
上锁的线程，但是动画可以不上锁。 


目前暂定是碰撞后出现一个动画，死亡的生物体上出现图案墓碑  
https://gamedevelopment.tutsplus.com/tutorials/introduction-to-javafx-for-game-development--cms-23835   
参照上面的游戏链接，打算是用一个AnimationTimer来实现一个游戏进程，在
里面我们处理每一个生物体的线程，每个handler写下这个生物的信息，死亡的动画
用timeLine也可以，成为一个幽灵漂浮的状态，每个handler重绘就好啦！！  
于此同时也就可以进行键盘的输入了，键盘识别后停止AnimationTime就好，或者
重新开始也行，handler也可以在里面记录信息！  
所以现在的问题就剩下多线程的处理了！！  



按空格键时所有生物体线程执行start()，向敌方前进；  

# 随缘战斗葫芦娃  
# 设计思路及效果  
作为一个和平爱好者，当然希望能减少打打杀杀的啦。所以设计的背景是一个战场中
大家相互摸鱼满一分钟就能取得胜利的故事。任意一方胜利条件是消灭对面所有
人物。由于爱好和平的设定，每个人物都是随机走动的，只有有人挡在要行走
的路上才会触发战斗。（所以很多时候都是和平结束的嘻嘻）  
P.S.悄悄泄露一下：这里支持自己修改地图文件，就可以创造出一个罗马斗兽场
的环境，由于路径可选择性增加，战斗的场面就会增加了  
效果图如下： 
    
    
# 对象设计  
UML图如下：  
    
在javafx中，Controller类负责处理有关UI的设计，比如监听按键，显示背景
等。而真正处理这些事件的是MainCanvas类。顾名思义，MainCanvas类有
canvas对象，作为画板负责刷新图片，实时显示战况。  
BattleField类是用于储存地图的类。封装了对地图的更新处理，包括读取地图、
安排生物体占据地图中的每个位置等。每个位置用一个Holder类来表示，Holder
类中保存了这个位置上所存在的物体的信息，以及可以访问该位置上的生物。    
生物体有关的类继承于Creature类，包括葫芦娃的类，爷爷的类，蛇精的类等，
这样设计主要是考虑了这些生物的共性，都有血量HP，有攻击力，有对应的图片
路径名，可以访问这些相同的量。在共性之上，葫芦娃、蛇精由于属性不同，所以
作为Creature的继承来继续完善。可以通过Override相关的函数得到葫芦娃
不同的特性，给葫芦娃添加不同的技能。   
与生物体相对应的有BlockObject类。它没有血量等，只是作为地图上一个阻碍物
存在，所以单独独立出来一个类。阻碍物也分Water和Rock，有不同的特性可以
继续扩展。  
Creature类和BlockObject类都实现了Identity接口。这个接口用于访问
这些物体的图片显示。这样做的好处是通过Identity接口我们就能确定在UI
中对应图片，我们只能显示有这个接口的生物体。同时接口的好处也便于以后
各个生物体图片的修改，这样就不用跨文件地修改有关图片代码。  

 


